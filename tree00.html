<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="300" height="200" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
"use strict";

var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

// trunk first
var p0 = {x: 150, y: 200};
var p1 = {x: 150, y: 150};

drawLine(p0, p1, 10);
drawBranches(p0, p1, -4.5, 8);

function drawBranches(fr, to, alpha, thck) { // from point, to point, alpha, thickness
	if ( thck <= 2 ) return;
	// previous length: sqrt((to.x-fr.x)^2 + (to.y-fr.y)^2)
	var dx = to.x-fr.x;
	var dy = to.y-fr.y;
	var len = Math.sqrt(dx * dx + dy * dy);
	// new direction 0
	var beta = ( Math.atan(dy / (dx + 0.001)) + alpha + Math.random() / 2 ) / 2;
	dx = Math.sin(beta) * len * Math.random() * 1.15;
	dy = Math.cos(beta) * len * Math.random() * 1.15;
	var toto = {x: to.x + dx, y: to.y + dy};
	drawLine(to, toto, thck);
	drawBranches(to, toto, alpha, thck-1);
	// new direction 1
	var beta = ( Math.atan(dy / (dx + 0.001)) - alpha - Math.random() / 2 ) / 2;
	dx = Math.sin(beta) * len * Math.random() * 1.15;
	dy = Math.cos(beta) * len * Math.random() * 1.15;
	var toto = {x: to.x + dx, y: to.y + dy};
	drawLine(to, toto, thck);
	drawBranches(to, toto, alpha, thck-1);
}

function drawLine(fr, to, thck) {
	ctx.beginPath();
	ctx.moveTo(fr.x, fr.y);
	ctx.lineTo(to.x, to.y);
	ctx.lineWidth=thck;
	ctx.lineCap="round";
	ctx.stroke(); // actually draw the path on the canvas	
}

</script>
<p><strong>Note:</strong> Treetest </p>
</body>
</html>